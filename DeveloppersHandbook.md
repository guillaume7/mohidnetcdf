# Developper's Handbook #

## TODOS ##
  1. Finish the plot\_vectors mode
  1. Add a visible/invisible option in an appropriate config file
  1. Add a save option in the appropriate config file
  1. See if it's possible to add overlays on top of overlays of gcf by successive calls on plotvar ? ...
  1. Add a xyz volumetric type.

## getnc variables dimensions order ##
  * `[time   depth   lon lat] (u,v,S,T)`
  * `[time           lon lat] (level)`
  * `[       depth   lon lat] (residual u,v,fluxu,fluxv)`
  * `[               lon lat] (bathymetry)`

## Functions hierarchy ##
  * {plotvar, inqdataset} --> root functions
    * do {config, coords, attr, user} --> configuration functions
    * do {maps, xzs, yzs, xyzs} --> loop functions sorted by plot type
      * get\_vars --> gets a list of netcdf variables
        * get\_var --> gets the netcdf variable times the NaN-landmask
      * do {map, xz, yz, xyz} --> constructs the plot structure
      * do plot --> plots the list of netcdf variables

**NOTE**: The nesting level of functions is defined by the number of tabs
indenting the line.

## Structures ##
  * `s_plot = struct(...`
> > 'type', type, ...`
> > `'var2d', var2d, ...`
> > `'zt', zt, ...`
> > `'zts', zts, ...`
> > 'datet', datet, ...
> > 'dates', dates, ...
> > 'x\_lab', x\_lab, ...
> > 'y\_lab', y\_lab, ...
> > 'c\_x2d', c\_x2d, ...
> > 'c\_y2d', c\_y2d);`

  * s\_coords = struct(...
> > 'lat2d', lat2d, ...
> > 'lon2d', lon2d, ...
> > 'units', units, ...
> > 'colorlim', colorlim, ...
> > 'latlim', latlim, ...
> > 'lonlim', lonlim, ...
> > 'zsize', zsize, ...
> > 'gregorian\_time', gregorian\_time, ...
> > 'serial\_time', serial\_time);

**NOTE**: The ranges of the dimensions of the coords structure will be
given by the user structure.

  * s\_user(n,k) = struct{'map','xz','yz','xyz'}(...
> > 'instant', instants(n), ...
> > {'layer', 'zrange', 'zrange', 'zrange'}, {layers(k), layers, layers}...
> > {'xrange', 'xsection', 'xrange', 'xrange'}, {xx, xx(i), xx, xx}, ...
> > {'yrange', 'yrange', 'ysection', 'yrange'}, {yy, yy, yy(j), yy});

**NOTE**: The user structure contains the indexes required to give to the coords
structure.

  * s\_attr = struct(...
> > 'units', units,...
> > 'colorlim', colorlim,...
> > 'varname', varname);

  * s\_config = struct(...
> > 'batim\_contour\_scale', batim\_contour\_scale, ...
> > 'coastline\_file', coastline\_file, ...
> > 'save\_coastline', save\_coastline, ...
> > 'coastline\_res', coastline\_res, ...
> > 'coastline\_patch\_color', coastline\_patch\_color, ...
> > 'plot\_color', plot\_color, ...
> > 'colorlimits', colorlimits, ...
> > 'colormap\_type', colormap\_type, ...
> > 'colormap\_inv', colormap\_inv, ...
> > 'shading\_type', shading\_type, ...
> > 'plot\_contour', plot\_contour, ...
> > 'contourlimits', contourlimits, ...
> > 'contour\_scale', contour\_scale, ...
> > 'contour\_line\_style', contour\_line\_style, ...
> > 'contour\_colormap\_type', contour\_colormap\_type, ...
> > 'file', file, ...
> > 'grid\_fontsize', grid\_fontsize, ...
> > 'title\_fontsize', title\_fontsize, ...
> > 'override\_ll', override\_ll, ...
> > 'lat\_lon\_override\_file', lat\_lon\_override\_file, ...
> > 'closematlab', closematlab, ...
> > 'change\_miss', change\_miss, ...
> > 'new\_miss', new\_miss, ...
> > 'output\_format', output\_format, ...
> > 'output\_extension', output\_extension, ...
> > 'output\_dir', output\_dir, ...
> > 'horizontal\_scale\_x', horizontal\_scale\_x, ...
> > 'horizontal\_scale\_y', horizontal\_scale\_y, ...
> > 'horizontal\_scale\_size', horizontal\_scale\_size, ...
> > 'plot\_vectors', plot\_vectors, ...
> > 'u\_vec', u\_vec, ...
> > 'v\_vec', v\_vec, ...
> > 'inc', inc, ...
> > 'scalequiv', scalequiv, ...
> > 'scalevec', scalevec, ...
> > 'vec\_headlength', vec\_headlength, ...
> > 'vec\_headwidth', vec\_headwidth, ...
> > 'vec\_shaftwidth', vec\_shaftwidth );













